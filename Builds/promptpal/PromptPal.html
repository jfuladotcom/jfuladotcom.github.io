<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>AI Prompt Collaboration Tool</title>
<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #e8e7e5;  /* light grey background */
  color: #333;          /* dark grey text */
  display: flex;
  flex-direction: column;
  height: 100vh;
  position: relative; 
  margin: 0 auto;
  max-width:600px;
}

header {
  display: flex;
  align-items: center;
  padding: 12px;
  background: #3b3734;  /* medium dark grey */
  color: white;
  position: relative;
 
}

.history-btn, .help-btn {
  background: none;
  border: none;
  color: white;
  font-size: 1.5rem;
  cursor: pointer;
  transition: color 0.2s ease;
}

.history-btn:hover, .help-btn:hover {
  color: #d1d1d1;
}

.history-btn { margin-right: 8px; }
.help-btn { margin-left: auto; }

h1 {
  flex: 1;
  font-size: 1.2rem;
  margin: 0;
  text-align: center;
  color: white;
}

/* Splash placeholder */
#splash {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  color: #777;
  padding: 20px;
  text-align: center;
}

#splash-icon {
  font-size: 7rem;
  margin-top: 12px;
  animation: float 2s ease-in-out infinite;
}

@keyframes float {
  0% { transform: translateY(0); }
  50% { transform: translateY(-8px); }
  100% { transform: translateY(0); }
}

/* Output area */
#outputs {
  flex: 1;
  overflow-y: auto;
  padding: 10px;
  display: none;
  color: #333;
}

.output {
  background: #ffffff;
  padding: 14px;
  border-radius: 8px;
  border: 1px solid #ccc;
  margin-bottom: 12px;
  position: relative;
  white-space: pre-wrap;
  cursor: pointer;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.08);
  transition: box-shadow 0.3s ease, background-color 0.3s ease;
}

.output:hover {
  box-shadow: 0 6px 15px rgba(0, 0, 0, 0.12);
  background-color: #f0f0f0;
}

.copy-confirm {
  position: absolute;
  right: 8px;
  top: 8px;
  background: #4caf50;
  color: white;
  padding: 2px 6px;
  font-size: 0.8rem;
  border-radius: 4px;
  opacity: 0;
  transition: opacity 0.3s;
  pointer-events: none;
}

.copy-confirm.show {
  opacity: 1;
  pointer-events: auto;
}

/* Quad setting buttons */
.settings-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
  padding: 10px;
}

.settings-grid button {
  padding: 14px;
  border: 1.5px solid #909090;
  border-radius: 8px;
  background: #f8f9fa;
  font-weight: 600;
  cursor: pointer;
  color: #555;
  box-shadow: 0 2px 6px rgba(100, 100, 100, 0.12);
  transition: background 0.3s, box-shadow 0.3s;
}

.settings-grid button:hover {
  background: #e0e0e0;
  box-shadow: 0 6px 15px rgba(100, 100, 100, 0.25);
}

/* Bottom input bar */
.input-bar {
  display: grid;
  grid-template-columns: 40px 1fr 80px;
  gap: 8px;
  padding: 10px;
  border-top: 1px solid #d6d6d6;
  background: #f9fafc;
}

.input-bar textarea {
  resize: none;
  height: 38px;
  padding: 8px;
  font-size: 1rem;
  width: 90%;
  border-radius: 6px;
  border: 1px solid #bbb;
  color: #333;
  box-shadow: 0 1px 3px rgba(0,0,0,0.07);
  transition: border-color 0.3s ease;
  overflow: auto;
}

.input-bar textarea::placeholder {
  color: #999;
}

.input-bar textarea:focus {
  outline: none;
  border-color: #888888;
  box-shadow: 0 0 8px rgba(136,136,136,0.3);
}

.input-bar button {
  border: none;
  background: #707070;
  color: white;
  font-weight: 600;
  border-radius: 6px;
  cursor: pointer;
  box-shadow: 0 2px 6px rgba(70, 70, 70, 0.25);
  transition: background 0.3s ease, box-shadow 0.3s ease;
}

.input-bar button:hover {
  background: #595959;
  box-shadow: 0 4px 12px rgba(70, 70, 70, 0.4);
}

.mic-btn {
  background: transparent !important;
  font-size: 1.2rem;
  border-radius: 6px !important;
  cursor: pointer;
  box-shadow: none !important;
  color: #333 !important;
  transition: background-color 0.3s ease;
}

/* .mic-btn:hover { } */

.listening{ color: #ff0000 !important;}

/* Panels (History, Settings, Help) */
.panel {
  position: fixed;
  left: 50%;
  transform: translateX(-50%);  
  bottom: -100%;
  background: white;
  border-top: 2px solid #bbbbbb;
  border-radius: 8px 8px 0 0;
  padding: 16px;
  max-height: 70%;
  overflow-y: auto;
  transition: bottom 0.3s ease;
  box-shadow: 0 4px 12px rgba(100, 100, 100, 0.15);
  z-index: 1000;
  color: #333;
  text-shadow: none;
  line-height: 1.5rem;
}

  
.panel.active {
  bottom: 0;
}

.panel header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0;
  background: none;
  color: #444;
}

.panel header h2 {
  font-size: 1.1rem;
  margin: 0;
  font-weight: 600;
}

.panel header button {
  border: none;
  background: transparent;
  color: #3b3734;
  font-size: 1rem;
  border-radius: 6px;
  cursor: pointer;
  padding: 6px 12px;  
  transition: background 0.3s;
}

/* .panel header button:hover { } */

#collabLog {
  white-space: pre-wrap;
  max-height: 100%;
  color: #333;
  font-family: monospace;
}

/* Mic button styling */
#micBtn {
  font-size: 26px;
  cursor: pointer;
  border: none;
  background: transparent;
  outline: none;
  padding: 10px;
}

/* General slider styles */
  input[type="range"] {
   /* Width with prefixes for legacy support */
  -webkit-width: 90% !important; /* Older WebKit browsers */
  -moz-width: 90% !important;    /* Older Firefox versions */
  -ms-width: 90% !important;     /* IE and Edge */
  -o-width: 90% !important;      /* Older Opera */
  width: 90% !important;         /* Standard */

  /* Background color - no prefixes needed for basic colors */
  background-color: #3b3734 !important;
  /* Text color */
  color: white !important;
  padding: 10px !important;

  /* Border radius with prefixes */
  -webkit-border-radius: 5px !important; /* Chrome, Safari */
  -moz-border-radius: 5px !important;    /* Firefox */
  border-radius: 5px !important;         /* Standard */

  /* Box sizing with prefixes */
  -webkit-box-sizing: border-box !important;
  -moz-box-sizing: border-box !important;
  box-sizing: border-box !important;

}

@media only screen and (max-width: 600px) {
  .panel {  
    left: 0;
    right:0;
    transform: inherit;    
  }
}

</style>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

</head>
<body>

<header>
  <button class="history-btn" onclick="togglePanel('historyPanel')" title="History"><i class="material-icons" style="font-size:26px;">menu</i></button>
  <h1>PromptPal </h1>
  <button class="help-btn" onclick="togglePanel('helpPanel')" title="Help"><i class="material-icons" style="font-size:26px;">help</i></button>
</header>

<!-- Splash placeholder -->
<div id="splash">
  <p>Your results will appear here...</p>
  <div id="splash-icon">✨</div>
</div>

<!-- Prompt outputs -->
<div id="outputs"></div>

<!-- Quad settings buttons -->
<div class="settings-grid">
  <button onclick="togglePanel('tempPanel')">Temperature</button>
  <button onclick="togglePanel('topPPanel')">Top-p</button>
  <button onclick="togglePanel('topKPanel')">Top-k</button>
  <button onclick="togglePanel('repPenPanel')">Repetition Penalty</button>
</div>

<!-- Input bar -->
<div class="input-bar">
  <button id="micBtn" class="mic-btn" title="Voice input"><i class="material-icons" style="font-size:26px;">mic_off</i></button>
  <textarea id="prompt" placeholder="Type or speak your prompt..."></textarea>
  <button onclick="submitPrompt()">Submit</button>
</div>

<!-- History Panel -->
<div id="historyPanel" class="panel">
  <header><h2>History</h2><button onclick="togglePanel('historyPanel')">Close</button></header>
  <div id="collabLog"></div>
</div>

<!-- Help Panel -->
<div id="helpPanel" class="panel">
  <header><h2>Help & Usage</h2><button onclick="togglePanel('helpPanel')"><i class="material-icons" style="font-size:26px;">cancel</i></button></header>
  <div style="padding:10px; font-size:0.95em; line-height:1.4;">
   <h2>Welcome to the AI Prompt Tool!</h2>
      <p>This is a simple and friendly tool that helps you talk to an AI and get useful answers or creative ideas.</p>

      <h2>How to Use</h2>
      <ul>
        <li>
          <strong>Prompt Input Box:</strong> At the bottom of the screen, you will find the box where you can type your question or what you want the AI to do. For example, you can ask it to write a story, answer a question, or help solve a problem.
        </li>
        <li>
          <strong>Control Buttons:</strong> Above the input box, there are buttons to change special settings that control how the AI answers you:
          <ul>
            <li><strong>Temperature:</strong> A creativity dial. Turn it up for more imaginative and surprising answers, or down for clearer and focused answers.</li>
            <li><strong>Top-p and Top-k:</strong> These settings decide how the AI picks its next words. Changing them can make the AI more creative or more careful.</li>
            <li><strong>Repetition Penalty:</strong> Stops the AI from repeating the same things too much, keeping the conversation interesting.</li>
          </ul>
        </li>
        <li>
          <strong>Voice Input:</strong> Tap the <strong>mic icon</strong> to speak instead of typing. The AI will listen to your voice and turn it into text for easy questions or commands.
        </li>
        <li>
          <strong>History:</strong> Your past questions and answers are saved and can be opened by tapping the <strong>☰ icon</strong> at the top left. This helps you look back or continue earlier conversations.
        </li>
        <li>
          <strong>Copy Output:</strong> When you see the AI’s answer, tap it to copy everything inside, including the settings. This makes it easy to save or share answers with the same settings.
        </li>
      </ul>

      <p>These features help you control how the AI talks with you, making it fun, creative, or focused depending on what you need!</p>
  </div>
</div>

<!-- Setting Panels -->
<div id="tempPanel" class="panel">
  <header><h2>Temperature</h2><button onclick="togglePanel('tempPanel')"><i class="material-icons" style="font-size:26px;">cancel</i></button></header>
  <input class="slider" type="range" min="0" max="1" step="0.01" value="0.7" id="temperature" oninput="tempVal.textContent=this.value">
  <div>Value: <span id="tempVal">0.7</span></div>
  <p>Imagine you are telling a story. If you keep the temperature low, you tell a simple, normal story like “The cat sat on the mat.” But if you turn the temperature up, your story becomes more fun and wild like “The cat flew to the moon on a rocket made of candy.” The higher the temperature, the more surprising and creative the story.</p>
</div>

<div id="topPPanel" class="panel">
  <header><h2>Top-p</h2><button onclick="togglePanel('topPPanel')"><i class="material-icons" style="font-size:26px;">cancel</i></button></header>
  <input type="range" min="0" max="1" step="0.01" value="0.8" id="top_p" oninput="topPVal.textContent=this.value">
  <div>Value: <span id="topPVal">0.8</span></div>
  <p>Instead of choosing a fixed number like 5 (top-k), top-p means you tell the AI to pick from enough popular colors so that the total chance adds up to 90%. Sometimes that means picking from 10 balls, sometimes it’s only 3, depending on how popular the colors are.</p>
</div>

<div id="topKPanel" class="panel">
  <header><h2>Top-k</h2><button onclick="togglePanel('topKPanel')"><i class="material-icons" style="font-size:26px;">cancel</i></button></header>
  <input type="range" min="1" max="100" step="1" value="20" id="top_k" oninput="topKVal.textContent=this.value">
  <div>Value: <span id="topKVal">20</span></div>
  <p>Pretend you have a box with 100 different colored balls, but you only let the AI pick from the top 5 favorite colors in the box. So the AI can only choose from those 5 colors, making sure it won’t pick something strange or odd like a black ball if black isn’t one of the favorites. This keeps the story nice but with some choice.</p>
</div>

<div id="repPenPanel" class="panel">
  <header><h2>Repetition Penalty</h2><button onclick="togglePanel('repPenPanel')"><i class="material-icons" style="font-size:26px;">cancel</i></button></header>
  <input type="range" min="1" max="2" step="0.01" value="1.05" id="repetition_penalty" oninput="repPenVal.textContent=this.value">
  <div>Value: <span id="repPenVal">1.05</span></div>
  <p>Let’s say when telling a story, you don’t want to hear the same sentence again and again like “The cat sat on the mat” repeated five times. The repetition penalty helps the AI avoid repeating itself and instead say new, interesting things.</p>
</div>

<script>
  // Get references to sliders and value spans
  const temperature = document.getElementById('temperature');
  const top_p = document.getElementById('top_p');
  const top_k = document.getElementById('top_k');
  const repetition_penalty = document.getElementById('repetition_penalty');

  const tempValSpan = document.getElementById('tempVal');
  const topPValSpan = document.getElementById('topPVal');
  const topKValSpan = document.getElementById('topKVal');
  const repPenValSpan = document.getElementById('repPenVal');

  const outputsDiv = document.getElementById('outputs');
  const log = document.getElementById('collabLog');

  // Update slider value displays live
  if (temperature) {
    temperature.oninput = () => tempValSpan.textContent = Number(temperature.value).toFixed(2);
  }
  if (top_p) {
    top_p.oninput = () => topPValSpan.textContent = Number(top_p.value).toFixed(2);
  }
  if (top_k) {
    top_k.oninput = () => topKValSpan.textContent = top_k.value;
  }
  if (repetition_penalty) {
    repetition_penalty.oninput = () => repPenValSpan.textContent = Number(repetition_penalty.value).toFixed(2);
  }

  // Utility function to get formatted slider settings text
  function getSliderSettingsText() {
    const tempVal = temperature ? Number(temperature.value).toFixed(2) : 'N/A';
    const topPVal = top_p ? Number(top_p.value).toFixed(2) : 'N/A';
    const topKVal = top_k ? top_k.value : 'N/A';
    const repPenVal = repetition_penalty ? Number(repetition_penalty.value).toFixed(2) : 'N/A';

    return (
      `\n\n--- Settings ---\n` +
      `Temperature: ${tempVal}\n` +
      `Top-p: ${topPVal}\n` +
      `Top-k: ${topKVal}\n` +
      `Repetition Penalty: ${repPenVal}`
    );
  }

  // Panels open/close toggle
  function togglePanel(id) {
    const panel = document.getElementById(id);
    if (panel) panel.classList.toggle("active");
  }

  // Submit prompt - replaces output with prompt + slider settings, updates history
  function submitPrompt() {
    const promptInput = document.getElementById('prompt');
    const prompt = promptInput.value.trim();
    if (!prompt) return;

    // Hide splash and show outputs container
    const splash = document.getElementById('splash');
    if (splash) splash.style.display = "none";
    if (outputsDiv) outputsDiv.style.display = "block";

    // Clear previous output(s)
    outputsDiv.innerHTML = '';

    // Compose output text including slider settings
    const combinedText = prompt + getSliderSettingsText();

    // Create new output block
    const div = document.createElement('div');
    div.className = 'output';
    div.textContent = combinedText;

    // Add copy confirmation div as child
    const copyConfirmDiv = document.createElement('div');
    copyConfirmDiv.className = 'copy-confirm';
    copyConfirmDiv.textContent = 'Copied!';
    div.appendChild(copyConfirmDiv);

    // Clicking copies full prompt + sliders text
    div.onclick = () => copyToClipboard(div);
    outputsDiv.appendChild(div);

    // Append prompt only to history panel
    const time = new Date().toLocaleTimeString();
    if (log) log.textContent = `[${time}] ${prompt}\n` + log.textContent;

    // Clear prompt input
    promptInput.value = '';
  }

  // Copy to clipboard with visual confirmation
  async function copyToClipboard(div) {
    const text = div.textContent.replace("Copied!", "").trim();
    try {
      await navigator.clipboard.writeText(text);
      const confirm = div.querySelector('.copy-confirm');
      if (confirm) {
        confirm.classList.add('show');
        setTimeout(() => confirm.classList.remove('show'), 1200);
      }
    } catch (err) {
      alert('Could not copy text: ' + err);
    }
  }


const micBtn = document.getElementById('micBtn');
const promptInput = document.getElementById('prompt');
const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

if (!SpeechRecognition) {
  micBtn.disabled = true;
  micBtn.title = "Speech recognition not supported.";
} else {
  const recognition = new SpeechRecognition();
  recognition.lang = "en-US";
  recognition.interimResults = false;

  micBtn.addEventListener('click', () => {
    if (micBtn.classList.contains('listening')) {
      recognition.stop();
      micBtn.classList.remove('listening');
      micBtn.innerHTML = '<i class="material-icons" style="font-size:26px;">mic_off</i>';
    } else {
      recognition.start();
      micBtn.classList.add('listening');
      micBtn.innerHTML = '<i class="material-icons" style="font-size:26px;">mic</i>';
    }
  });

  recognition.addEventListener('end', () => {
    micBtn.classList.remove('listening');
    micBtn.innerHTML = '<i class="material-icons" style="font-size:26px;">mic_off</i>';
  });

  recognition.addEventListener('result', (event) => {
    const transcript = event.results[0][0].transcript;
    promptInput.value += (promptInput.value ? " " : "") + transcript;
  });

  recognition.addEventListener('error', (event) => {
    console.error("Speech recognition error detected: " + event.error);
    micBtn.classList.remove('listening');
    micBtn.innerHTML = '<i class="material-icons" style="font-size:26px;">mic_alert</i>';
  });
}






</script>

</body>
</html>
