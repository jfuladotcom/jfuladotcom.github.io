<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio Transcription Analysis</title>
    <style>
        body {
    font-family: Arial, sans-serif;
    line-height: 1.6;
    margin: 0;
    padding: 0;
}

.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

.upload-section {
    margin-bottom: 20px;
}

.results-section {
    display: none;
}

canvas {
    max-width: 100%;
    height: auto;
}

button {
    padding: 10px 20px;
    margin-right: 10px;
    cursor: pointer;
}

#summary, #researchQuestions {
    margin-top: 20px;
}

.export-section {
    margin-top: 20px;
}

    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <div class="container">
        <h1>Audio Transcription Analysis</h1>
        <div class="upload-section">
            <input type="file" id="csvFile" accept=".csv">
            <button id="analyzeBtn">Analyze</button>
        </div>
        <div id="results" class="results-section">
            <div id="speakerAnalysis">
                <h2>Speaker Analysis</h2>
                <canvas id="speakerChart"></canvas>
            </div>
            <div id="wordFrequency">
                <h2>Word Frequency</h2>
                <canvas id="wordFrequencyChart"></canvas>
            </div>
            <div id="sentimentAnalysis">
                <h2>Sentiment Analysis</h2>
                <canvas id="sentimentChart"></canvas>
            </div>
            <div id="summary">
                <h2>Summary</h2>
                <p id="summaryText"></p>
            </div>
            <div id="researchQuestions">
                <h2>Potential Research Questions</h2>
                <ul id="questionsList"></ul>
            </div>
            <div class="export-section">
                <button id="exportJSON">Export JSON</button>
                <button id="exportCSV">Export CSV</button>
                <button id="exportPDF">Export PDF</button>
            </div>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
    const csvFile = document.getElementById('csvFile');
    const analyzeBtn = document.getElementById('analyzeBtn');
    const results = document.getElementById('results');

    analyzeBtn.addEventListener('click', analyzeCSV);

    function analyzeCSV() {
        const file = csvFile.files[0];
        if (!file) {
            alert('Please select a CSV file');
            return;
        }

        const reader = new FileReader();
        reader.onload = function(e) {
            const csvData = e.target.result;
            const parsedData = parseCSV(csvData);
            analyzeData(parsedData);
        };
        reader.readAsText(file);
    }

    function parseCSV(csvData) {
        const lines = csvData.split('\n');
        const headers = lines[0].split(',');
        const data = [];

        for (let i = 1; i < lines.length; i++) {
            const values = lines[i].split(',');
            if (values.length === headers.length) {
                const row = {};
                for (let j = 0; j < headers.length; j++) {
                    row[headers[j].trim()] = values[j].trim();
                }
                data.push(row);
            }
        }

        return data;
    }

    function analyzeData(data) {
        const speakers = analyzeSpeakers(data);
        const wordFreq = analyzeWordFrequency(data);
        const sentiment = analyzeSentiment(data);
        const summary = generateSummary(data);
        const questions = generateResearchQuestions(data);

        displayResults(speakers, wordFreq, sentiment, summary, questions);
        results.style.display = 'block';
    }

    function analyzeSpeakers(data) {
        // Implement speaker analysis logic here
        return { 'Speaker 1': 30, 'Speaker 2': 45, 'Speaker 3': 25 };
    }

    function analyzeWordFrequency(data) {
        // Implement word frequency analysis logic here
        return { 'word1': 10, 'word2': 8, 'word3': 6, 'word4': 4, 'word5': 2 };
    }

    function analyzeSentiment(data) {
        // Implement sentiment analysis logic here
        return { 'Positive': 60, 'Neutral': 30, 'Negative': 10 };
    }

    function generateSummary(data) {
        // Implement summary generation logic here
        return "This is a sample summary of the audio transcription...";
    }

    function generateResearchQuestions(data) {
        // Implement research question generation logic here
        return [
            "How does Speaker 1's language differ from Speaker 2's?",
            "What are the most common topics discussed in the conversation?",
            "How does the sentiment change throughout the conversation?"
        ];
    }

    function displayResults(speakers, wordFreq, sentiment, summary, questions) {
        createPieChart('speakerChart', 'Speaker Participation', speakers);
        createBarChart('wordFrequencyChart', 'Word Frequency', wordFreq);
        createPieChart('sentimentChart', 'Sentiment Analysis', sentiment);

        document.getElementById('summaryText').textContent = summary;

        const questionsList = document.getElementById('questionsList');
        questionsList.innerHTML = '';
        questions.forEach(question => {
            const li = document.createElement('li');
            li.textContent = question;
            questionsList.appendChild(li);
        });

        setupExportButtons(speakers, wordFreq, sentiment, summary, questions);
    }

    function createPieChart(canvasId, title, data) {
        const ctx = document.getElementById(canvasId).getContext('2d');
        new Chart(ctx, {
            type: 'pie',
            data: {
                labels: Object.keys(data),
                datasets: [{
                    data: Object.values(data),
                    backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF']
                }]
            },
            options: {
                responsive: true,
                title: {
                    display: true,
                    text: title
                }
            }
        });
    }

    function createBarChart(canvasId, title, data) {
        const ctx = document.getElementById(canvasId).getContext('2d');
        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: Object.keys(data),
                datasets: [{
                    label: 'Frequency',
                    data: Object.values(data),
                    backgroundColor: '#36A2EB'
                }]
            },
            options: {
                responsive: true,
                title: {
                    display: true,
                    text: title
                },
                scales: {
                    yAxes: [{
                        ticks: {
                            beginAtZero: true
                        }
                    }]
                }
            }
        });
    }

    function setupExportButtons(speakers, wordFreq, sentiment, summary, questions) {
        document.getElementById('exportJSON').addEventListener('click', () => exportJSON(speakers, wordFreq, sentiment, summary, questions));
        document.getElementById('exportCSV').addEventListener('click', () => exportCSV(speakers, wordFreq, sentiment, summary, questions));
        document.getElementById('exportPDF').addEventListener('click', () => exportPDF(speakers, wordFreq, sentiment, summary, questions));
    }

    function exportJSON(speakers, wordFreq, sentiment, summary, questions) {
        const data = { speakers, wordFreq, sentiment, summary, questions };
        const jsonString = JSON.stringify(data, null, 2);
        downloadFile(jsonString, 'analysis_results.json', 'application/json');
    }

    function exportCSV(speakers, wordFreq, sentiment, summary, questions) {
        // Implement CSV export logic here
        alert('CSV export not implemented in this example');
    }

    function exportPDF(speakers, wordFreq, sentiment, summary, questions) {
        // Implement PDF export logic here using jsPDF
        alert('PDF export not implemented in this example');
    }

    function downloadFile(content, fileName, contentType) {
        const a = document.createElement('a');
        const file = new Blob([content], { type: contentType });
        a.href = URL.createObjectURL(file);
        a.download = fileName;
        a.click();
    }
});

    </script>
</body>
</html>
